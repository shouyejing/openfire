<openerp>
    <data>

    <!--##########################################################################################################################-->
    <!--##########################################________Paiements client________################################################-->
    <!--##########################################################################################################################-->
    
    <!--#############################################________Recherche________####################################################-->
    
        <!-- Vue paiements clients filtre recherche Mode de paiement à la place du journal -->
        <record id="view_of_voucher_filter" model="ir.ui.view">
            <field name="name">view.of.voucher.filter</field>
            <field name="model">account.voucher</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_filter_customer_pay"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="mode_id"/>
                </field>
                <filter string="Journal" position="replace">
                    <filter string="Mode de Paiement" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'mode_id'}"/>
                </filter>
            </field>
        </record>
        
        <!-- Vue paiements fournisseurs filtre recherche Mode de paiement à la place du journal -->
        <record id="view_of_voucher_vendor_filter" model="ir.ui.view">
            <field name="name">view.of.voucher.vendor.filter</field>
            <field name="model">account.voucher</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_filter_vendor_pay"/>
            <field name="arch" type="xml">
                <filter string="Journal" position="replace">
                    <filter string="Mode de Paiement" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'mode_id'}"/>
                </filter>
            </field>
        </record>
        
    <!--#############################################_______Vue tree_________#####################################################-->
        
        <!-- Vue paiements clients et fournisseurs tree Remplacement journal par mode de paiement -->
        <record id="view_of_voucher_tree" model="ir.ui.view">
            <field name="name">view.of.voucher.tree</field>
            <field name="model">account.voucher</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_tree"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="mode_id"/>
                </field>
            </field>
        </record>

    <!--#############################################_______Vue form_________#####################################################-->
        
        <!-- Paiements fournisseurs form Remplacement journal par mode de paiement -->
        <record id="view_of_vendor_payment_form" model="ir.ui.view">
            <field name="name">view.of.voucher.payment.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1"/>
                    <field name="mode_id" domain="[('journal.type','in',['bank', 'cash'])]" invisible="context.get('line_type', False)" widget="selection" on_change="onchange_mode(mode_id, journal_id, line_dr_ids, False, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>

        <record id="account_voucher.action_vendor_payment" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','payment')]</field>
        </record>

        <!-- Paiements clients form Remplacement journal par mode de paiement -->
        <record id="view_of_vendor_receipt_form" model="ir.ui.view">
            <field name="name">view.of.voucher.receipt.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1"/>
                    <field name="mode_id" domain="[('journal.type','in',['bank', 'cash'])]" invisible="context.get('line_type', False)" widget="selection" on_change="onchange_mode(mode_id, journal_id, line_cr_ids, False, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>

        <record id="account_voucher.action_vendor_receipt" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','receipt')]</field>
        </record>

        <record id="account_voucher.act_pay_voucher" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','receipt'), ('partner_id','=',partner_id)]</field>
            <field name="view_id" ref="account_voucher.view_vendor_receipt_form"/>
        </record>

        <record id="account_voucher.act_pay_bills" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','payment'), ('partner_id','=',partner_id)]</field>
            <field name="view_id" ref="account_voucher.view_vendor_payment_form"/>
        </record>

    </data>
</openerp>
