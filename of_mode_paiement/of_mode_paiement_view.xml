<openerp>
    <data>

    <!--##########################################################################################################################-->
    <!--##########################################________Paiements client________################################################-->
    <!--##########################################################################################################################-->
    
    <!--#############################################________Recherche________####################################################-->
    
        <record id="view_of_voucher_filter" model="ir.ui.view">
            <field name="name">view.of.voucher.filter</field>
            <field name="model">account.voucher</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_filter_customer_pay"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="mode_id"/>
                </field>
                <filter string="Journal" position="replace">
                    <filter string="Mode de Paiement" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'mode_id'}"/>
                </filter>
            </field>
        </record>
        
        <record id="view_of_voucher_vendor_filter" model="ir.ui.view">
            <field name="name">view.of.voucher.vendor.filter</field>
            <field name="model">account.voucher</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_filter_vendor_pay"/>
            <field name="arch" type="xml">
                <filter string="Journal" position="replace">
                    <filter string="Mode de Paiement" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'mode_id'}"/>
                </filter>
            </field>
        </record>
        
    <!--#############################################_______Vue tree_________#####################################################-->
        
        <record id="view_of_voucher_tree" model="ir.ui.view">
            <field name="name">view.of.voucher.tree</field>
            <field name="model">account.voucher</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_tree"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="mode_id"/>
                </field>
            </field>
        </record>

    <!--#############################################_______Vue form_________#####################################################-->
        
        <!-- These views are never used 
            account_voucher.view_voucher_form
            account_voucher.view_low_priority_payment_form
            
             These views should not be used
            account_voucher.view_of_sale_receipt_form
            account_voucher.view_of_purchase_receipt_form
        -->

        <!-- Paiement Fournisseur -->
        <record id="view_of_vendor_payment_form" model="ir.ui.view">
            <field name="name">view.of.voucher.payment.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1"/>
                    <field name="mode_id" domain="[('journal.type','in',['bank', 'cash'])]" invisible="context.get('line_type', False)" widget="selection" on_change="onchange_mode(mode_id, journal_id, line_dr_ids, False, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>

        <record id="account_voucher.action_vendor_payment" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','payment')]</field>
        </record>

        <!-- Paiement Client -->
        <record id="view_of_vendor_receipt_form" model="ir.ui.view">
            <field name="name">view.of.voucher.receipt.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1"/>
                    <field name="mode_id" domain="[('journal.type','in',['bank', 'cash'])]" invisible="context.get('line_type', False)" widget="selection" on_change="onchange_mode(mode_id, journal_id, line_cr_ids, False, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>
        
        <record id="account_voucher.action_vendor_receipt" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','receipt')]</field>
        </record>

        <record id="account_voucher.act_pay_voucher" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','receipt'), ('partner_id','=',partner_id)]</field>
            <field name="view_id" ref="account_voucher.view_vendor_receipt_form"/>
        </record>

        <!-- Recu de ventes -->
        <!--record model="ir.ui.view" id="view_of_sale_receipt_form">
            <field name="name">view.of.voucher.sale.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_sale_receipt_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1" on_change="onchange_journal(journal_id, line_cr_ids, tax_id, partner_id, date, amount, type, company_id, context)"/>
                    <field name="mode_id" domain="[('journal.type','in',['sale','sale_refund'])]" widget="selection" on_change="onchange_mode(mode_id, journal_id, line_cr_ids, tax_id, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>
        
        <record id="account_voucher.action_sale_receipt" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type','in',['sale','sale_refund']), ('type','=','sale')]</field>
            <field name="search_view_id" ref="account_voucher.view_voucher_filter_sale"/>
        </record-->

        <record id="account_voucher.act_pay_bills" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type', 'in', ['bank', 'cash']), ('type','=','payment'), ('partner_id','=',partner_id)]</field>
            <field name="view_id" ref="account_voucher.view_vendor_payment_form"/>
        </record>

        <!-- Recu d'achat -->
        <!--record model="ir.ui.view" id="view_of_purchase_receipt_form">
            <field name="name">view.of.voucher.purchase.form</field>
            <field name="model">account.voucher</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account_voucher.view_purchase_receipt_form"/>
            <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                    <field name="journal_id" invisible="1" on_change="onchange_journal(journal_id, line_dr_ids, tax_id, partner_id, date, amount, type, company_id, context)"/>
                    <field name="mode_id" domain="[('journal.type','in',['purchase','purchase_refund'])]" widget="selection" select="1" on_change="onchange_mode(mode_id, journal_id, line_dr_ids, tax_id, partner_id, date, amount, type, company_id, context)"/>
                </field>
            </field>
        </record>

        <record id="account_voucher.action_purchase_receipt" model="ir.actions.act_window">
            <field name="domain">[('mode_id.journal.type','in',['purchase','purchase_refund']), ('type','=','purchase')]</field>
            <field name="search_view_id" eval="account_voucher.view_voucher_filter_vendor"/>
        </record-->

        <delete model='ir.ui.menu' id="account_voucher.menu_action_purchase_receipt"/>
        <delete model='ir.ui.menu' id="account_voucher.menu_action_sale_receipt"/>
    </data>
</openerp>
